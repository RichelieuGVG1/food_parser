
# Скрапер рецептов с сайта food.ru

## Описание

Этот скрипт предназначен для сбора рецептов с сайта [food.ru](https://food.ru). Он проходит по категориям рецептов, собирает информацию о блюдах и сохраняет данные в файл Excel. Скрипт обрабатывает страницы каждой категории и сохраняет информацию, такую как название рецепта, описание, ингредиенты, макронутриенты, время приготовления, пошаговые инструкции и изображение рецепта.

## Структура проекта

- `scrape_pages()`: Основная функция для скрапинга рецептов. Проходит по всем страницам всех категорий и собирает ссылки на рецепты.
- `parse_recipe_details(recipe_soup, category)`: Функция для парсинга деталей рецепта с его страницы.
- `clean_recipe_soup(recipe_soup)`: Функция для очистки HTML-кода рецепта от лишних пробелов и символов.
- `update_excel_with_recipe(recipe_details, file_path)`: Функция для обновления Excel-файла с новыми рецептами. Если рецепт уже существует, он не будет добавлен.
- `execute_foo_multithreaded()`: Пример использования многопоточности для выполнения скрапинга в нескольких потоках (комментирован).

## Установка

1. Клонируйте репозиторий или скачайте файлы.
2. Установите необходимые библиотеки:

```bash
pip install requests beautifulsoup4 openpyxl
```

3. Убедитесь, что в корневой директории проекта есть файл Excel для сохранения данных (например, `dishes.xlsx`).

## Запуск

Для запуска скрипта выполните команду:

```bash
python script.py
```

## Структура сохранённых данных

Каждый рецепт сохраняется в файл Excel с следующей структурой:

| Столбец         | Описание                                                                 |
| --------------- | ------------------------------------------------------------------------ |
| dish            | Название блюда                                                          |
| category        | Категория блюда                                                         |
| description     | Описание блюда                                                          |
| macros          | Макронутриенты (белки, жиры, углеводы и т.д.)                           |
| ingredients     | Ингредиенты и их количество                                              |
| properties      | Свойства блюда (например, калорийность, аллергены и т.д.)               |
| image           | Ссылка на изображение блюда                                              |
| recipe          | Пошаговая инструкция по приготовлению                                    |
| time            | Время приготовления и готовности (в минутах)                            |

## Использование многопоточности

В скрипте реализована возможность использования многопоточности с помощью библиотеки `concurrent.futures`. Это позволяет ускорить процесс сбора данных, отправляя запросы к страницам параллельно. Пример многопоточного запуска закомментирован в конце скрипта, и его можно использовать для ускорения работы скрипта:

```python
execute_foo_multithreaded()
```

## Задержка между запросами

Чтобы избежать слишком высокой нагрузки на сервер, рекомендуется добавить небольшую задержку между запросами в функции `scrape_pages()`. Для этого можно раскомментировать строку:

```python
# time.sleep(0.1)
```

## Примечания

- Убедитесь, что вы соблюдаете правила использования сайта и не нарушаете их политику при использовании данного скрипта.
- Скрипт автоматически проверяет наличие рецепта в файле Excel и не добавляет его повторно.

## Лицензия

Этот проект находится под лицензией MIT.
